<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>hamsterdb Embedded Database: hamsterdb Environment Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">hamsterdb Embedded Database
   &#160;<span id="projectnumber">2.1.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hamsterdb Environment Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gadce3fa0be20c08a1f60534bee5a5e600"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#gadce3fa0be20c08a1f60534bee5a5e600">HAM_FLUSH_COMMITTED_TRANSACTIONS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:gadce3fa0be20c08a1f60534bee5a5e600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gada0316f690685bbdaea3c8d4fb7003eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#gada0316f690685bbdaea3c8d4fb7003eb">HAM_DONT_LOCK</a>&#160;&#160;&#160;0xf0000000</td></tr>
<tr class="separator:gada0316f690685bbdaea3c8d4fb7003eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga30504f70a25fbbbbc06dadb27702d7b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga30504f70a25fbbbbc06dadb27702d7b7">ham_env_create</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> **env, const char *filename, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> mode, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *param)</td></tr>
<tr class="separator:ga30504f70a25fbbbbc06dadb27702d7b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3fc0d1849f597616690c86f7e1f1c010"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga3fc0d1849f597616690c86f7e1f1c010">ham_env_open</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> **env, const char *filename, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *param)</td></tr>
<tr class="separator:ga3fc0d1849f597616690c86f7e1f1c010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1da6fd9eee42c7d0c6e4a23dd7e5c059"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga1da6fd9eee42c7d0c6e4a23dd7e5c059">ham_env_get_parameters</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *param)</td></tr>
<tr class="separator:ga1da6fd9eee42c7d0c6e4a23dd7e5c059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab34c22e1218e6b06582b2841c8980708"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#gab34c22e1218e6b06582b2841c8980708">ham_env_create_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> **db, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> name, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *params)</td></tr>
<tr class="separator:gab34c22e1218e6b06582b2841c8980708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fffd9890b88be96ccb1fac64f9414e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga1fffd9890b88be96ccb1fac64f9414e3">ham_env_open_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> **db, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> name, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *params)</td></tr>
<tr class="separator:ga1fffd9890b88be96ccb1fac64f9414e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33f53ef644e0a3c2e7e4a1b951c68fdb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga33f53ef644e0a3c2e7e4a1b951c68fdb">ham_env_rename_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> oldname, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> newname, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:ga33f53ef644e0a3c2e7e4a1b951c68fdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4019f7b8768fba99cd87eb8f1ff3d5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#gac4019f7b8768fba99cd87eb8f1ff3d5f">ham_env_erase_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> name, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:gac4019f7b8768fba99cd87eb8f1ff3d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9194de2b20fabf3765a856827fe6ae9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga9194de2b20fabf3765a856827fe6ae9e">ham_env_flush</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:ga9194de2b20fabf3765a856827fe6ae9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae961295da64834848ceb031747e59de2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#gae961295da64834848ceb031747e59de2">ham_env_get_database_names</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *names, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *count)</td></tr>
<tr class="separator:gae961295da64834848ceb031747e59de2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3da805485d3de709b7b43faad2d119c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
<a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#gae3da805485d3de709b7b43faad2d119c">ham_env_close</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:gae3da805485d3de709b7b43faad2d119c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gada0316f690685bbdaea3c8d4fb7003eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAM_DONT_LOCK&#160;&#160;&#160;0xf0000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hamsterdb_8h_source.html#l00996">996</a> of file <a class="el" href="hamsterdb_8h_source.html">hamsterdb.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadce3fa0be20c08a1f60534bee5a5e600"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAM_FLUSH_COMMITTED_TRANSACTIONS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hamsterdb_8h_source.html#l00975">975</a> of file <a class="el" href="hamsterdb_8h_source.html">hamsterdb.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae3da805485d3de709b7b43faad2d119c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes the Database Environment</p>
<p>This function closes the Database Environment. It also frees the memory resources allocated in the <em>env</em> handle, and tries to truncate the file (see below).</p>
<p>If the flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a> is specified, hamsterdb automatically calls <a class="el" href="group__ham__database.html#gaf1d8765daba9421c8a57e233e2f9bce7">ham_db_close</a> with flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a> on all open Databases (which closes all open Databases and their Cursors). This invalidates the ham_db_t and ham_cursor_t handles!</p>
<p>If the flag is not specified, the application must close all Database handles with <a class="el" href="group__ham__database.html#gaf1d8765daba9421c8a57e233e2f9bce7">ham_db_close</a> to prevent memory leaks.</p>
<p>This function also aborts all Transactions which were not yet committed, and therefore renders all Transaction handles invalid. If the flag <a class="el" href="group__ham__database.html#ga59b3249f35ef7d6a27c37fe383ca5201">HAM_TXN_AUTO_COMMIT</a> is specified, all Transactions will be committed.</p>
<p>This function also tries to truncate the file and "cut off" unused space at the end of the file to reduce the file size. This feature is disabled on Win32 if memory mapped I/O is used (see <a class="el" href="group__ham__database.html#ga5413f94fa215309f094dc8ce04f2cab0">HAM_DISABLE_MMAP</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for closing the handle. Possible flags are: <ul>
<li>
<a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a>. Calls <a class="el" href="group__ham__database.html#gaf1d8765daba9421c8a57e233e2f9bce7">ham_db_close</a> with the flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a> on every open Database </li>
<li>
<a class="el" href="group__ham__database.html#ga59b3249f35ef7d6a27c37fe383ca5201">HAM_TXN_AUTO_COMMIT</a>. Automatically commit all open Transactions </li>
<li>
<a class="el" href="group__ham__database.html#gaddca00550f7bac79eb6f1f7c02f04f5c">HAM_TXN_AUTO_ABORT</a>. Automatically abort all open Transactions; this is the default behaviour </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if <em>env</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00707">hamsterdb::env::close()</a>, and <a class="el" href="client1_8c_source.html#l00036">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga30504f70a25fbbbbc06dadb27702d7b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> **&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a Database Environment</p>
<p>A Database Environment is a collection of Databases, which are all stored in one physical file (or in-memory). The maximum number of Databases depends on the page size; the default is above 600.</p>
<p>Each Database in an Environment is identified by a positive 16bit value (except 0 and values at or above 0xf000). Databases in an Environment can be created with <a class="el" href="group__ham__env.html#gab34c22e1218e6b06582b2841c8980708">ham_env_create_db</a> or opened with <a class="el" href="group__ham__env.html#ga1fffd9890b88be96ccb1fac64f9414e3">ham_env_open_db</a>.</p>
<p>Specify a URL instead of a filename (i.e. "ham://localhost:8080/customers.db") to access a remote hamsterdb Server.</p>
<p>To enable ACID Transactions, supply the flag <a class="el" href="group__ham__database.html#ga39f7e995afb8789c05241102d3948a12">HAM_ENABLE_TRANSACTIONS</a>. By default, hamsterdb will use a Journal for recovering the Environment and its data in case of a crash, and also to re-apply committed Transactions which were not yet flushed to disk. This Journalling can be disabled with the flag <a class="el" href="group__ham__database.html#ga992cb7a4eb161c2b2aff6e417f06bf6d">HAM_DISABLE_RECOVERY</a>. (It is disabled if the Environment is in-memory.)</p>
<p>If Transactions are not required, but hamsterdb should still be able to recover in case of a crash or power outage, then the flag <a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a> will enable the Journal (without allowing Transactions.)</p>
<p>For performance reasons the Journal does not use fsync(2) (or FlushFileBuffers on Win32) to flush modified buffers to disk. Use the flag <a class="el" href="group__ham__database.html#gade10968ab35fab7709eb143aff29f985">HAM_ENABLE_FSYNC</a> to force the use of fsync.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A pointer to an Environment handle </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the Environment file. If the file already exists, it is overwritten. Can be NULL for an In-Memory Environment. Can be a URL ("ham://&lt;hostname&gt;:&lt;port&gt;/&lt;environment&gt;") for remote access. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for opening the Environment, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ham__database.html#gade10968ab35fab7709eb143aff29f985">HAM_ENABLE_FSYNC</a> Flushes all file handles after committing or aborting a Transaction using fsync(), fdatasync() or FlushFileBuffers(). This file has no effect if Transactions are disabled. Slows down performance but makes sure that all file handles and operating system caches are transferred to disk, thus providing a stronger durability. </li>
<li>
<a class="el" href="group__ham__database.html#gace4c4343ff4009f6dbc89f6cbc8896ee">HAM_IN_MEMORY</a> Creates an In-Memory Environment. No file will be created, and the Database contents are lost after the Environment is closed. The <em>filename</em> parameter can be NULL. Do <b>NOT</b> specify <em>cache_size</em> other than 0. </li>
<li>
<a class="el" href="group__ham__database.html#ga5413f94fa215309f094dc8ce04f2cab0">HAM_DISABLE_MMAP</a> Do not use memory mapped files for I/O. By default, hamsterdb checks if it can use mmap, since mmap is faster than read/write. For performance reasons, this flag should not be used. </li>
<li>
<a class="el" href="group__ham__database.html#ga15097f5df4e9671792fb65eac9d05b70">HAM_CACHE_UNLIMITED</a> Do not limit the cache. Nearly as fast as an In-Memory Database. Not allowed in combination with a limited cache size. </li>
<li>
<a class="el" href="group__ham__database.html#ga39f7e995afb8789c05241102d3948a12">HAM_ENABLE_TRANSACTIONS</a> Enables Transactions for this Environment. This flag implies <a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a> Enables logging/recovery for this Environment. Not allowed in combination with <a class="el" href="group__ham__database.html#gace4c4343ff4009f6dbc89f6cbc8896ee">HAM_IN_MEMORY</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga992cb7a4eb161c2b2aff6e417f06bf6d">HAM_DISABLE_RECOVERY</a> Disables logging/recovery for this Environment. </li>
<li>
<a class="el" href="group__ham__database.html#gaf4dfb11199a22ecca5baeeb06577fc35">HAM_FLUSH_WHEN_COMMITTED</a> Immediately flushes committed Transactions and writes them to the Btree. Disabled by default. If disabled then hamsterdb buffers committed Transactions and only starts flushing when too many Transactions were committed. </li>
</ul>
</td></tr>
    <tr><td class="paramname">mode</td><td>File access rights for the new file. This is the <em>mode</em> parameter for creat(2). Ignored on Microsoft Windows. Default is 0644. </td></tr>
    <tr><td class="paramname">param</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures. The following parameters are available: <ul>
<li>
<a class="el" href="group__ham__database.html#ga7b1dbaff7cc807b44af4928c2f097e9d">HAM_PARAM_CACHE_SIZE</a> The size of the Database cache, in bytes. The default size is defined in src/config.h as <em>HAM_DEFAULT_CACHE_SIZE</em> - usually 2MB </li>
<li>
<a class="el" href="group__ham__database.html#ga038eba1d0fb2b732858ebe5fee18b1ee">HAM_PARAM_POSIX_FADVISE</a> Sets the "advice" for posix_fadvise(). Only on supported platforms. Allowed values are <a class="el" href="group__ham__database.html#gaa011b419056493e00aa104da3aa1f71d">HAM_POSIX_FADVICE_NORMAL</a> (which is the default) or <a class="el" href="group__ham__database.html#ga4bf323b0760aff3ba39abcbbee9745ff">HAM_POSIX_FADVICE_RANDOM</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga50681b29e5fcca7e5e8d694c0e04ecb3">HAM_PARAM_PAGE_SIZE</a> The size of a file page, in bytes. It is recommended not to change the default size. The default size depends on hardware and operating system. Page sizes must be 1024 or a multiple of 2048. </li>
<li>
<a class="el" href="group__ham__database.html#ga92d2be26ff1cc41a9044067d5c264135">HAM_PARAM_FILE_SIZE_LIMIT</a> Sets a file size limit (in bytes). Disabled by default. Not allowed in combination with <a class="el" href="group__ham__database.html#gace4c4343ff4009f6dbc89f6cbc8896ee">HAM_IN_MEMORY</a>. If the limit is exceeded, API functions return <a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga7a06b5f85e47806fa7b51e74dc2dc47c">HAM_PARAM_LOG_DIRECTORY</a> The path of the log file and the journal files; default is the same path as the database file. Ignored for remote Environments. </li>
<li>
<a class="el" href="group__ham__database.html#gae8d6383ccf0a9b6e63d1d655d2a81cc5">HAM_PARAM_NETWORK_TIMEOUT_SEC</a> Timeout (in seconds) when waiting for data from a remote server. By default, no timeout is set. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags or parameters was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gab3c1003cb681477b768c00d93e51a398">HAM_IO_ERROR</a> if the file could not be opened or reading/writing failed </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gac29fff6dc372d4df81aa6d954fa8003f">HAM_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gacdfdeff22e45f04b89ad176c5124c9b0">HAM_INV_PAGE_SIZE</a> if <em>page_size</em> is not 1024 or a multiple of 2048 </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga8459c9fc7a39faeda339e8101213a51a">HAM_INV_KEY_SIZE</a> if <em>key_size</em> is too large (at least 4 keys must fit in a page) </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga8cc1290a674002e12458e354ecd1ffc9">HAM_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga85b6e006baaff5a5e333d519408c04da">HAM_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ham__env.html#ga30504f70a25fbbbbc06dadb27702d7b7">ham_env_create</a> </dd>
<dd>
<a class="el" href="group__ham__env.html#gae3da805485d3de709b7b43faad2d119c">ham_env_close</a> </dd>
<dd>
<a class="el" href="group__ham__env.html#ga3fc0d1849f597616690c86f7e1f1c010">ham_env_open</a> </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00636">hamsterdb::env::create()</a>, and <a class="el" href="client1_8c_source.html#l00036">main()</a>.</p>

</div>
</div>
<a class="anchor" id="gab34c22e1218e6b06582b2841c8980708"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_create_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> **&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new Database in a Database Environment</p>
<p>An Environment can contain a (limited) amount of Databases; the exact limit depends on the page size and is above 600.</p>
<p>Each Database in an Environment is identified by a positive 16bit value. 0 and values at or above 0xf000 are reserved.</p>
<p>This function initializes the ham_db_t handle (the second parameter). When the handle is no longer in use, it should be closed with <a class="el" href="group__ham__database.html#gaf1d8765daba9421c8a57e233e2f9bce7">ham_db_close</a>. Alternatively, the Database handle is closed automatically if <a class="el" href="group__ham__env.html#gae3da805485d3de709b7b43faad2d119c">ham_env_close</a> is called with the flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a>.</p>
<p>A Database can (and should) be configured and optimized for the data that is inserted. The data is described through flags and parameters. hamsterdb differentiates between several data characteristics, and offers predefined "types" to describe the keys. In general, the default key type (<a class="el" href="group__ham__key__types.html#ga84ed8b30fc3f5b64aea6b31afc5c5d17">HAM_TYPE_BINARY</a>) is slower than the other types, and fixed-length binary keys (<a class="el" href="group__ham__key__types.html#ga84ed8b30fc3f5b64aea6b31afc5c5d17">HAM_TYPE_BINARY</a> in combination with <a class="el" href="group__ham__database.html#gafc2dda95e30a5502d13d320058837983">HAM_PARAM_KEY_SIZE</a>) is faster than variable-length binary keys. It is therefore recommended to always set the key size and record size, although it is not required.</p>
<p>Internally, hamsterdb uses two different layouts ("default" and "pax)
depending on the settings specified by the user. The "default" layout is enabled for variable-length keys or if duplicate keys are enabled. For fixed-length keys (without duplicates) the "pax" layout is chosen. The "pax" layout is more compact and usually faster.</p>
<p>A word of warning regarding the use of fixed length binary keys (<a class="el" href="group__ham__key__types.html#gaf170bfc1b20585bce61298525e9bc914">HAM_TYPE_CUSTOM</a> or <a class="el" href="group__ham__key__types.html#ga84ed8b30fc3f5b64aea6b31afc5c5d17">HAM_TYPE_BINARY</a> in combination with <a class="el" href="group__ham__database.html#gafc2dda95e30a5502d13d320058837983">HAM_PARAM_KEY_SIZE</a>): if your key size is too large, only few keys will fit in a Btree node. The Btree fanout will be very high, which will decrease performance. In such cases it might be better to NOT specify the key size; then hamsterdb will store keys as blobs if they are too large.</p>
<p>See the Wiki documentation for <a href="https://github.com/cruppstahl/hamsterdb/wiki/Evaluating-and-Benchmarking">Evaluating and Benchmarking</a> on how to test different configurations and optimize for performance.</p>
<p>The key type is set with <a class="el" href="group__ham__database.html#gae642952eb2dabf0ec19464a94626cb48">HAM_PARAM_KEY_TYPE</a> and can have either of the following values:</p>
<ul>
<li>
HAM_TYPE_BINARY This is the default key type: a binary blob. Internally, hamsterdb uses memcmp(3) for the sort order. Key size depends on <a class="el" href="group__ham__database.html#gafc2dda95e30a5502d13d320058837983">HAM_PARAM_KEY_SIZE</a> and is unlimited (<a class="el" href="group__ham__database.html#gaf25506f228886dc8eae74d017de2d6e3">HAM_KEY_SIZE_UNLIMITED</a>) by default. </li>
<li>
HAM_TYPE_CUSTOM Similar to <a class="el" href="group__ham__key__types.html#ga84ed8b30fc3f5b64aea6b31afc5c5d17">HAM_TYPE_BINARY</a>, but uses a callback function for the sort order. This function is supplied by the application with <dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ham__database.html#ga2b86ac0c7fa0d2506cb6a55fb638a901">ham_db_set_compare_func</a>. </dd></dl>
</li>
<li>
HAM_TYPE_UINT8 Key is a 8bit (1 byte) unsigned integer </li>
<li>
HAM_TYPE_UINT16 Key is a 16bit (2 byte) unsigned integer </li>
<li>
HAM_TYPE_UINT32 Key is a 32bit (4 byte) unsigned integer </li>
<li>
HAM_TYPE_UINT64 Key is a 64bit (8 byte) unsigned integer </li>
<li>
HAM_TYPE_REAL32 Key is a 32bit (4 byte) float </li>
<li>
HAM_TYPE_REAL64 Key is a 64bit (8 byte) double </li>
</ul>
<p>If the key type is ommitted then <a class="el" href="group__ham__key__types.html#ga84ed8b30fc3f5b64aea6b31afc5c5d17">HAM_TYPE_BINARY</a> is the default.</p>
<p>If binary/custom keys are so big that they cannot be stored in the Btree, then the full key will be stored in an overflow area, which has performance implications when accessing such keys.</p>
<p>In addition to the flags above, you can specify <em>HAM_ENABLE_DUPLICATE_KEYS</em> to insert duplicate keys, i.e. to model 1:n or n:m relationships.</p>
<p>If the size of the records is always constant, then <a class="el" href="group__ham__database.html#ga3d64ce8f8c248cfb74b23f1f5691ffda">HAM_PARAM_RECORD_SIZE</a> should be used to specify this size. This allows hamsterdb to optimize the record storage, and small records will automatically be stored in the Btree's leaf nodes instead of a separately allocated blob, allowing faster access. A record size of 0 is valid and suited for boolean values ("key exists" vs "key doesn't exist"). The default record size is <a class="el" href="group__ham__database.html#gafab7566923907c3da1f1ea2e29b5428f">HAM_RECORD_SIZE_UNLIMITED</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle. </td></tr>
    <tr><td class="paramname">db</td><td>A valid Database handle, which will point to the created Database. To close the handle, use <a class="el" href="group__ham__database.html#gaf1d8765daba9421c8a57e233e2f9bce7">ham_db_close</a>. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the Database. If a Database with this name already exists, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a>. Database names from 0xf000 to 0xffff and 0 are reserved. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for creating the Database, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ham__database.html#ga1dddfdf2c6b7ac5dd20599388b997a4d">HAM_ENABLE_DUPLICATE_KEYS</a>  Enable duplicate keys for this Database. By default, duplicate keys are disabled. </li>
<li>
<a class="el" href="group__ham__database.html#ga786c119dab984f38355ac043bb3c082d">HAM_RECORD_NUMBER32</a>  Creates an "auto-increment" Database. Keys in Record Number Databases are automatically assigned an incrementing 32bit value. If key-&gt;data is not NULL (and key-&gt;flags is <a class="el" href="hamsterdb_8h.html#a1f80d7f9db705552f363ab35d4ab4c8a">HAM_KEY_USER_ALLOC</a>), the value of the current key is returned in <em>key</em>. If key-data is NULL and key-&gt;size is 0, key-&gt;data is temporarily allocated by hamsterdb. </li>
<li>
<a class="el" href="group__ham__database.html#gaa8487377855cf7a15659ea1e406753e3">HAM_RECORD_NUMBER64</a>  Creates an "auto-increment" Database. Keys in Record Number Databases are automatically assigned an incrementing 64bit value. If key-&gt;data is not NULL (and key-&gt;flags is <a class="el" href="hamsterdb_8h.html#a1f80d7f9db705552f363ab35d4ab4c8a">HAM_KEY_USER_ALLOC</a>), the value of the current key is returned in <em>key</em>. If key-data is NULL and key-&gt;size is 0, key-&gt;data is temporarily allocated by hamsterdb. </li>
</ul>
</td></tr>
    <tr><td class="paramname">params</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures. The following parameters are available: <ul>
<li>
<a class="el" href="group__ham__database.html#gae642952eb2dabf0ec19464a94626cb48">HAM_PARAM_KEY_TYPE</a>  The type of the keys in the B+Tree index. The default is <a class="el" href="group__ham__key__types.html#ga84ed8b30fc3f5b64aea6b31afc5c5d17">HAM_TYPE_BINARY</a>. See above for more information. </li>
<li>
<a class="el" href="group__ham__database.html#gafc2dda95e30a5502d13d320058837983">HAM_PARAM_KEY_SIZE</a>  The (fixed) size of the keys in the B+Tree index; or <a class="el" href="group__ham__database.html#gaf25506f228886dc8eae74d017de2d6e3">HAM_KEY_SIZE_UNLIMITED</a> for unlimited and variable keys (this is the default). </li>
<li>
<a class="el" href="group__ham__database.html#ga3d64ce8f8c248cfb74b23f1f5691ffda">HAM_PARAM_RECORD_SIZE</a>  The (fixed) size of the records; or <a class="el" href="group__ham__database.html#gafab7566923907c3da1f1ea2e29b5428f">HAM_RECORD_SIZE_UNLIMITED</a> if there was no fixed record size specified (this is the default). </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a> if a Database with this <em>name</em> already exists in this Environment </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a> if the maximum number of Databases per Environment was already created </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00659">hamsterdb::env::create_db()</a>, and <a class="el" href="db1_8c_source.html#l00037">main()</a>.</p>

</div>
</div>
<a class="anchor" id="gac4019f7b8768fba99cd87eb8f1ff3d5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_erase_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes a Database from an Environment</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">name</td><td>The name of the Database to delete. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a>. If the Database was already opened, the function will fail with <a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a>. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for deleting the Database; unused, set to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or if the new Database name is reserved </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a> if a Database with this name is still open </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00690">hamsterdb::env::erase_db()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9194de2b20fabf3765a856827fe6ae9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flushes the Environment</p>
<p>This function flushes the Environment caches and writes the whole file to disk. All Databases of this Environment are flushed as well.</p>
<p>Since In-Memory Databases do not have a file on disk, the function will have no effect and will return <a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for flushing; unused, set to 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if <em>db</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00652">hamsterdb::env::flush()</a>.</p>

</div>
</div>
<a class="anchor" id="gae961295da64834848ceb031747e59de2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_get_database_names </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *&#160;</td>
          <td class="paramname"><em>names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the names of all Databases in an Environment</p>
<p>This function returns the names of all Databases and the number of Databases in an Environment.</p>
<p>The memory for <em>names</em> must be allocated by the user. <em>count</em> must be the size of <em>names</em> when calling the function, and will be the number of Databases when the function returns. The function returns <a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a> if <em>names</em> is not big enough; in this case, the caller should resize the array and call the function again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">names</td><td>Pointer to an array for the Database names </td></tr>
    <tr><td class="paramname">count</td><td>Pointer to the size of the array; will be used to store the number of Databases when the function returns.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if <em>env</em>, <em>names</em> or <em>count</em> is NULL </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a> if <em>names</em> is not large enough to hold all Database names </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00727">hamsterdb::env::get_database_names()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1da6fd9eee42c7d0c6e4a23dd7e5c059"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_get_parameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the current value for a given Environment setting</p>
<p>Only those values requested by the parameter array will be stored.</p>
<p>The following parameters are supported: </p>
<ul>
<li>
HAM_PARAM_CACHE_SIZE returns the cache size </li>
<li>
HAM_PARAM_PAGE_SIZE returns the page size </li>
<li>
HAM_PARAM_MAX_DATABASES returns the max. number of Databases of this Database's Environment </li>
<li>
HAM_PARAM_FLAGS returns the flags which were used to open or create this Database </li>
<li>
HAM_PARAM_FILEMODE returns the <em>mode</em> parameter which was specified when creating this Database </li>
<li>
HAM_PARAM_FILENAME returns the filename (the <em>value</em> of this parameter is a const char * pointer casted to a uint64_t variable) </li>
<li>
<a class="el" href="group__ham__database.html#ga7a06b5f85e47806fa7b51e74dc2dc47c">HAM_PARAM_LOG_DIRECTORY</a> The path of the log file and the journal files. Ignored for remote Environments. </li>
<li>
<a class="el" href="group__ham__database.html#ga4829f303c93b5fca1b455c64373016ff">HAM_PARAM_JOURNAL_COMPRESSION</a> Returns the selected algorithm for journal compression, or 0 if compression is disabled </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">param</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or <em>param</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00720">hamsterdb::env::get_parameters()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3fc0d1849f597616690c86f7e1f1c010"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> **&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens an existing Database Environment</p>
<p>This function opens an existing Database Environment.</p>
<p>A Database Environment is a collection of Databases, which are all stored in one physical file (or in-memory).</p>
<p>Each Database in an Environment is identified by a positive 16bit value (except 0 and values at or above 0xf000). Databases in an Environment can be created with <a class="el" href="group__ham__env.html#gab34c22e1218e6b06582b2841c8980708">ham_env_create_db</a> or opened with <a class="el" href="group__ham__env.html#ga1fffd9890b88be96ccb1fac64f9414e3">ham_env_open_db</a>.</p>
<p>Specify a URL instead of a filename (i.e. "ham://localhost:8080/customers.db") to access a remote hamsterdb Server.</p>
<p>Also see the documentation <a class="el" href="group__ham__env.html#ga30504f70a25fbbbbc06dadb27702d7b7">ham_env_create</a> about Transactions, Recovery and the use of fsync.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the Environment file, or URL of a hamsterdb Server </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for opening the Environment, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ham__database.html#ga4bbf0348ca6aa664c231e2873563ff57">HAM_READ_ONLY</a>  Opens the file for reading only. Operations that need write access (i.e. <a class="el" href="group__ham__database.html#gad7bba01b492e786d1cf7f29c23d2fac1">ham_db_insert</a>) will return <a class="el" href="group__ham__status__codes.html#gad826361943b784d3ae6ebf7b15cb7c70">HAM_WRITE_PROTECTED</a>. </li>
<li>
<a class="el" href="group__ham__database.html#gade10968ab35fab7709eb143aff29f985">HAM_ENABLE_FSYNC</a> Flushes all file handles after committing or aborting a Transaction using fsync(), fdatasync() or FlushFileBuffers(). This file has no effect if Transactions are disabled. Slows down performance but makes sure that all file handles and operating system caches are transferred to disk, thus providing a stronger durability. </li>
<li>
<a class="el" href="group__ham__database.html#ga5413f94fa215309f094dc8ce04f2cab0">HAM_DISABLE_MMAP</a>  Do not use memory mapped files for I/O. By default, hamsterdb checks if it can use mmap, since mmap is faster than read/write. For performance reasons, this flag should not be used. </li>
<li>
<a class="el" href="group__ham__database.html#ga15097f5df4e9671792fb65eac9d05b70">HAM_CACHE_UNLIMITED</a>  Do not limit the cache. Nearly as fast as an In-Memory Database. Not allowed in combination with a limited cache size. </li>
<li>
<a class="el" href="group__ham__database.html#ga39f7e995afb8789c05241102d3948a12">HAM_ENABLE_TRANSACTIONS</a>  Enables Transactions for this Environment. This flag imples <a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>  Enables logging/recovery for this Environment. Will return <a class="el" href="group__ham__status__codes.html#ga4b42acf0c22724118d91c82157fd3a48">HAM_NEED_RECOVERY</a>, if the Environment is in an inconsistent state. Not allowed in combination with <a class="el" href="group__ham__database.html#gace4c4343ff4009f6dbc89f6cbc8896ee">HAM_IN_MEMORY</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga992cb7a4eb161c2b2aff6e417f06bf6d">HAM_DISABLE_RECOVERY</a> Disables logging/recovery for this Environment. </li>
<li>
<a class="el" href="group__ham__database.html#ga20820df26239bd5c40ebdbe91184ee46">HAM_AUTO_RECOVERY</a>  Automatically recover the Environment, if necessary. This flag implies <a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>. </li>
<li>
<a class="el" href="group__ham__database.html#gaf4dfb11199a22ecca5baeeb06577fc35">HAM_FLUSH_WHEN_COMMITTED</a> Immediately flushes committed Transactions and writes them to the Btree. Disabled by default. If disabled then hamsterdb buffers committed Transactions and only starts flushing when too many Transactions were committed. </li>
</ul>
</td></tr>
    <tr><td class="paramname">param</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures. The following parameters are available: <ul>
<li>
<a class="el" href="group__ham__database.html#ga7b1dbaff7cc807b44af4928c2f097e9d">HAM_PARAM_CACHE_SIZE</a>  The size of the Database cache, in bytes. The default size is defined in src/config.h as <em>HAM_DEFAULT_CACHE_SIZE</em> - usually 2MB </li>
<li>
<a class="el" href="group__ham__database.html#ga038eba1d0fb2b732858ebe5fee18b1ee">HAM_PARAM_POSIX_FADVISE</a> Sets the "advice" for posix_fadvise(). Only on supported platforms. Allowed values are <a class="el" href="group__ham__database.html#gaa011b419056493e00aa104da3aa1f71d">HAM_POSIX_FADVICE_NORMAL</a> (which is the default) or <a class="el" href="group__ham__database.html#ga4bf323b0760aff3ba39abcbbee9745ff">HAM_POSIX_FADVICE_RANDOM</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga92d2be26ff1cc41a9044067d5c264135">HAM_PARAM_FILE_SIZE_LIMIT</a> Sets a file size limit (in bytes). Disabled by default. If the limit is exceeded, API functions return <a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga7a06b5f85e47806fa7b51e74dc2dc47c">HAM_PARAM_LOG_DIRECTORY</a> The path of the log file and the journal files; default is the same path as the database file. Ignored for remote Environments. </li>
<li>
<a class="el" href="group__ham__database.html#gae8d6383ccf0a9b6e63d1d655d2a81cc5">HAM_PARAM_NETWORK_TIMEOUT_SEC</a> Timeout (in seconds) when waiting for data from a remote server. By default, no timeout is set. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success. </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL, an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga101453daaf4f6ed5de0bedec7bb490a0">HAM_FILE_NOT_FOUND</a> if the file does not exist </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gab3c1003cb681477b768c00d93e51a398">HAM_IO_ERROR</a> if the file could not be opened or reading failed </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gac29fff6dc372d4df81aa6d954fa8003f">HAM_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version. </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga8cc1290a674002e12458e354ecd1ffc9">HAM_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga4b42acf0c22724118d91c82157fd3a48">HAM_NEED_RECOVERY</a> if the Database is in an inconsistent state </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gad10560c46fe5e1e5c478b24d7e6e3aec">HAM_LOG_INV_FILE_HEADER</a> if the logfile is corrupt </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga85b6e006baaff5a5e333d519408c04da">HAM_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga3edb0496c03c6d59aa526a2cb13776b3">HAM_NETWORK_ERROR</a> if a remote server is not reachable </dd></dl>

<p>Referenced by <a class="el" href="db1_8c_source.html#l00037">main()</a>, and <a class="el" href="hamsterdb_8hpp_source.html#l00644">hamsterdb::env::open()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1fffd9890b88be96ccb1fac64f9414e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_open_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> **&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens a Database in a Database Environment</p>
<p>Each Database in an Environment is identified by a positive 16bit value (except 0 and values at or above 0xf000).</p>
<p>This function initializes the ham_db_t handle (the second parameter). When the handle is no longer in use, it should be closed with <a class="el" href="group__ham__database.html#gaf1d8765daba9421c8a57e233e2f9bce7">ham_db_close</a>. Alternatively, the Database handle is closed automatically if <a class="el" href="group__ham__env.html#gae3da805485d3de709b7b43faad2d119c">ham_env_close</a> is called with the flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">db</td><td>A valid Database handle, which will point to the opened Database. To close the handle, use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ham__database.html#gaf1d8765daba9421c8a57e233e2f9bce7">ham_db_close</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the Database. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a>. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for opening the Database, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ham__database.html#ga4bbf0348ca6aa664c231e2873563ff57">HAM_READ_ONLY</a>  Opens the Database for reading only. Operations that need write access (i.e. <a class="el" href="group__ham__database.html#gad7bba01b492e786d1cf7f29c23d2fac1">ham_db_insert</a>) will return <a class="el" href="group__ham__status__codes.html#gad826361943b784d3ae6ebf7b15cb7c70">HAM_WRITE_PROTECTED</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramname">params</td><td>Reserved; set to NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist in this Environment. </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a> if this Database was already opened </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd></dl>

<p>Referenced by <a class="el" href="client1_8c_source.html#l00036">main()</a>, and <a class="el" href="hamsterdb_8hpp_source.html#l00671">hamsterdb::env::open_db()</a>.</p>

</div>
</div>
<a class="anchor" id="ga33f53ef644e0a3c2e7e4a1b951c68fdb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2490e8efdbcf776f081048147776b8e8">HAM_EXPORT</a> <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <a class="el" href="types_8h.html#ac7d8a0d2bec49a6e5169a86065a7987e">HAM_CALLCONV</a> ham_env_rename_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>newname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Renames a Database in an Environment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle. </td></tr>
    <tr><td class="paramname">oldname</td><td>The old name of the existing Database. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a>. </td></tr>
    <tr><td class="paramname">newname</td><td>The new name of this Database. If a Database with this name already exists, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a>. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for renaming the Database, combined with bitwise OR; unused, set to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or if the new Database name is reserved </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist in this Environment </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a> if a Database with the new name already exists </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga01ac56dcfd300fb45c0337e42ab0cb28">HAM_NOT_READY</a> if the Environment <em>env</em> was not initialized correctly (i.e. not yet opened or created) </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00683">hamsterdb::env::rename_db()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
